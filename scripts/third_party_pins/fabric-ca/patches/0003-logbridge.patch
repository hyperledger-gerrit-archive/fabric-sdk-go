From c6d0c2602e13d4fe2041062f26333f25719c3a42 Mon Sep 17 00:00:00 2001
From: Troy Ronda <t.....@securekey.com>
Date: Wed, 27 Sep 2017 15:07:04 -0400
Subject: [PATCH] logbridge

Copyright SecureKey Technologies Inc. All Rights Reserved.
SPDX-License-Identifier: Apache-2.0

Signed-off-by: Troy Ronda <t.....@securekey.com>
---
 lib/logbridge/logbridge.go | 42 ++++++++++++++++++++++++++++++++++++++++++
 util/flag.go               | 13 -------------
 2 files changed, 42 insertions(+), 13 deletions(-)
 create mode 100644 lib/logbridge/logbridge.go

diff --git a/lib/logbridge/logbridge.go b/lib/logbridge/logbridge.go
new file mode 100644
index 0000000..4599642
--- /dev/null
+++ b/lib/logbridge/logbridge.go
@@ -0,0 +1,42 @@
+/*
+Copyright SecureKey Technologies Inc. All Rights Reserved.
+
+SPDX-License-Identifier: Apache-2.0
+*/
+
+package logbridge
+
+import (
+	"github.com/hyperledger/fabric-sdk-go/pkg/logging"
+)
+
+var logger *logging.Logger
+
+func init() {
+	logger = logging.NewLogger("fabric_sdk_go")
+}
+
+// Debug bridges calls to the Go SDK logger's Debug.
+func Debug(format string, args ...interface{}) {
+	logger.Debug(args...)
+}
+
+// Debugf bridges calls to the Go SDK logger's Debugf.
+func Debugf(format string, args ...interface{}) {
+	logger.Debugf(format, args)
+}
+
+// Info bridges calls to the Go SDK logger's Info.
+func Info(format string, args ...interface{}) {
+	logger.Info(args...)
+}
+
+// Infof bridges calls to the Go SDK logger's Debugf.
+func Infof(format string, args ...interface{}) {
+	logger.Infof(format, args...)
+}
+
+// Fatalf bridges calls to the Go SDK logger's Debugf.
+func Fatalf(format string, args ...interface{}) {
+	logger.Fatalf(format, args...)
+}
diff --git a/util/flag.go b/util/flag.go
index 289415a..77f5bfb 100644
--- a/util/flag.go
+++ b/util/flag.go
@@ -24,7 +24,6 @@ import (
 
 	"github.com/cloudflare/cfssl/log"
 	"github.com/mitchellh/mapstructure"
-	"github.com/op/go-logging"
 	"github.com/spf13/cast"
 	"github.com/spf13/pflag"
 	"github.com/spf13/viper"
@@ -138,18 +137,6 @@ func (fr *flagRegistrar) getTag(f *Field, tagName string) string {
 	return val
 }
 
-// CmdRunBegin is called at the beginning of each cobra run function
-func CmdRunBegin() {
-	// If -d or --debug, set debug logging level
-	if viper.GetBool("debug") {
-		log.Level = log.LevelDebug
-
-		logging.SetLevel(logging.INFO, "bccsp")
-		logging.SetLevel(logging.INFO, "bccsp_p11")
-		logging.SetLevel(logging.INFO, "bccsp_sw")
-	}
-}
-
 // FlagString sets up a flag for a string, binding it to its name
 func FlagString(flags *pflag.FlagSet, name, short string, def string, desc string) {
 	flags.StringP(name, short, def, desc)
-- 
2.14.1

